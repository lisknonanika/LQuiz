<!DOCTYPE html>
<html>
<head>
    <meta content="width=device-width,initial-scale=1.0" name="viewport">
    <meta charset="utf-8">
    <title>LQuiz:Top Page</title>
    <%- include('parts/head') %>
    <script>
        const createQuestion = () => {location.href = "/question";}
        const getQuestion = (isOpen, offset) => {
            (async () => {
                const url = isOpen? "oepn-question": "close-question"
                const param = `address="<%= address %>"&offset=${offset}`;
                const ret = await doGet(`http://127.0.0.1:30001/api/${url}?${param}`);
                document.querySelector("#question-list").innerHTML = JSON.stringify(ret.response);
            })();
        }
    </script>
</head>
<body onload="getQuestion(true, 0)">
    <form method="post" id="frm"></form>

    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <a class="navbar-brand title" style="margin-left:5px;font-size:1.75rem;" href="/top">LQuiz</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo02" aria-controls="navbarTogglerDemo02" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarTogglerDemo02">
            <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
                <li class="nav-item active">
                    <a class="nav-link" href="#">Open Question</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Close Question</a>
                </li>
            </ul>

            <ul class="navbar-nav navbar-right">
                <li><a href="#"><span class="glyphicon glyphicon-user"></span> Sign Up</a></li>
                <li><a href="#"><span class="glyphicon glyphicon-log-in"></span> Login</a></li>
            </ul>
        </div>
    </nav>

    <button type="button" id="btn-logoff" class="btn btn-link" onclick="logout()">Logout</button>
    <div class="container">
        <%= address %>
        <button type="button" id="btn-login" class="btn btn-primary" onclick="createQuestion()">Create Question</button>
        <div id="question-list"></div>
    </div>
</body>
</html>